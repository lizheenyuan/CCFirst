{"version":3,"sources":["Player.js"],"names":["cc","Class","extends","Component","properties","jumpHeight","jumpDuration","maxMoveSpeed","accel","onLoad","node","runAction","setJumpAction","accLeft","accRight","xspeed","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","start","jumpUp","moveBy","v2","easing","easeCubicActionInOut","jumpDown","repeatForever","sequence","event","keyCode","macro","KEY","a","d","update","dt","Math","abs","x"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,oBAAW,CAhBH;AAiBRC,sBAAa,CAjBL;AAkBRC,sBAAa,CAlBL;AAmBRC,eAAM;AAnBE,KAHP;;AAyBL;;AAEAC,UA3BK,oBA2BK;AACN,aAAKC,IAAL,CAAUC,SAAV,CAAoB,KAAKC,aAAL,EAApB;AACA,aAAKC,OAAL,GAAa,KAAKC,QAAL,GAAc,KAA3B;AACA,aAAKC,MAAL,GAAY,CAAZ;AACAf,WAAGgB,WAAH,CAAeC,EAAf,CAAkBjB,GAAGkB,WAAH,CAAeC,SAAf,CAAyBC,QAA3C,EAAoD,KAAKC,SAAzD,EAAmE,IAAnE;AACArB,WAAGgB,WAAH,CAAeC,EAAf,CAAkBjB,GAAGkB,WAAH,CAAeC,SAAf,CAAyBG,MAA3C,EAAkD,KAAKC,OAAvD,EAA+D,IAA/D;AACH,KAjCI;AAmCLC,SAnCK,mBAmCI,CAER,CArCI;;AAsCLZ,mBAAc,yBACd;AACI,YAAIa,SAASzB,GAAG0B,MAAH,CAAU,KAAKpB,YAAf,EAA4BN,GAAG2B,EAAH,CAAM,CAAN,EAAQ,KAAKtB,UAAb,CAA5B,EAAsDuB,MAAtD,CAA6D5B,GAAG6B,oBAAH,EAA7D,CAAb;AACA,YAAIC,WAAW9B,GAAG0B,MAAH,CAAU,KAAKpB,YAAf,EAA4BN,GAAG2B,EAAH,CAAM,CAAN,EAAQ,CAAC,KAAKtB,UAAd,CAA5B,EAAuDuB,MAAvD,CAA8D5B,GAAG6B,oBAAH,EAA9D,CAAf;AACA,eAAO7B,GAAG+B,aAAH,CAAiB/B,GAAGgC,QAAH,CAAYP,MAAZ,EAAmBK,QAAnB,CAAjB,CAAP;AACH,KA3CI;AA4CLT,aA5CK,qBA4CKY,KA5CL,EA6CL;AACI,gBAAQA,MAAMC,OAAd;AACI,iBAAKlC,GAAGmC,KAAH,CAASC,GAAT,CAAaC,CAAlB;AACI,qBAAKxB,OAAL,GAAe,IAAf;AACA;AACJ,iBAAKb,GAAGmC,KAAH,CAASC,GAAT,CAAaE,CAAlB;AACI,qBAAKxB,QAAL,GAAc,IAAd;AACA;AANR;AAQH,KAtDI;AAuDLS,WAvDK,mBAuDGU,KAvDH,EAwDL;AACI,gBAAQA,MAAMC,OAAd;AACI,iBAAKlC,GAAGmC,KAAH,CAASC,GAAT,CAAaC,CAAlB;AACI,qBAAKxB,OAAL,GAAa,KAAb;AACA;;AAEJ,iBAAKb,GAAGmC,KAAH,CAASC,GAAT,CAAaE,CAAlB;AACI,qBAAKxB,QAAL,GAAc,KAAd;AACA;AAPR;AASH,KAlEI;AAmELyB,UAnEK,kBAmEGC,EAnEH,EAoEL;AACI,YAAI,KAAK3B,OAAT,EAAkB;AACd,iBAAKE,MAAL,IAAc,KAAKP,KAAL,GAAWgC,EAAzB;AACH,SAFD,MAEM,IAAI,KAAK1B,QAAT,EAAmB;AACrB,iBAAKC,MAAL,IAAe,KAAKP,KAAL,GAAWgC,EAA1B;AACH;AACD,YAAIC,KAAKC,GAAL,CAAS,KAAK3B,MAAd,IAAsB,KAAKR,YAA/B,EAA6C;AACzC,iBAAKQ,MAAL,GAAc,KAAKR,YAAL,GAAkB,KAAKQ,MAAvB,GAA8B0B,KAAKC,GAAL,CAAS,KAAK3B,MAAd,CAA5C;AACH;AACD,aAAKL,IAAL,CAAUiC,CAAV,IAAa,KAAK5B,MAAL,GAAYyB,EAAzB;AACH;AA9EI,CAAT","file":"Player.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        jumpHeight:0,\r\n        jumpDuration:0,\r\n        maxMoveSpeed:0,\r\n        accel:0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.node.runAction(this.setJumpAction());\r\n        this.accLeft=this.accRight=false;\r\n        this.xspeed=0;\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n    setJumpAction:function()\r\n    {\r\n        var jumpUp = cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCubicActionInOut());\r\n        var jumpDown = cc.moveBy(this.jumpDuration,cc.v2(0,-this.jumpHeight)).easing(cc.easeCubicActionInOut());\r\n        return cc.repeatForever(cc.sequence(jumpUp,jumpDown));\r\n    },\r\n    onKeyDown(event)\r\n    {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = true;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight=true;\r\n                break;\r\n        }\r\n    },\r\n    onKeyUp(event)\r\n    {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft=false;\r\n                break;\r\n        \r\n            case cc.macro.KEY.d:\r\n                this.accRight=false;\r\n                break;\r\n        }\r\n    },\r\n    update (dt) \r\n    {\r\n        if (this.accLeft) {\r\n            this.xspeed -=this.accel*dt;\r\n        }else if (this.accRight) {\r\n            this.xspeed += this.accel*dt;\r\n        }\r\n        if (Math.abs(this.xspeed)>this.maxMoveSpeed) {\r\n            this.xspeed = this.maxMoveSpeed*this.xspeed/Math.abs(this.xspeed);\r\n        }\r\n        this.node.x+=this.xspeed*dt;\r\n    },\r\n});\r\n"]}